<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>数据分析</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
<div class="main">
    <blockquote class="layui-elem-quote">生成新数据</blockquote>
    <div class="layui-collapse">        
        <div class="layui-colla-item">
            <h2 class="layui-colla-title">处理方式配置</h2>
            <div class="layui-colla-content layui-show">
                {% for column, handler in configs.items() %}
                <div class="layui-row">
                  <div class="layui-col-md2">
                    {{ column }}
                  </div>
                  <div class="layui-col-md10">
                    {% for item in handler %}
                    {{ item }}<br/>
                    {% endfor %}
                  </div>
                </div>
                <hr class="layui-bg-blue">
                {% endfor %}
            </div>
        </div>
        <div class="layui-colla-item">
            <h2 class="layui-colla-title">新数据</h2>
            <div class="layui-colla-content layui-show">
                <form class="layui-form">
                  <input type="hidden" name="proid" value="{{ proid }}">
                  <label class="layui-form-label">保存文件：</label>
                  <div class="layui-input-inline">
                    <input type="text" name="fname" placeholder="文件名" class="layui-input" value="dataset/data_new_{{ proid }}.csv" size="50">
                  </div>
                  <div class="layui-input-inline">
                    <button class="layui-btn" lay-submit lay-filter="save">开始生成</button>
                  </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="/static/layui/layui.js"></script>
<script>
layui.use(['element', 'form'], function(){
  var element = layui.element
  ,$ = layui.$
  ,form = layui.form;

  form.on('submit(save)', function(data){
    $.post('/handler/precondition/{{ proid }}', data.field, function(result){
      if(result.code == 0){
        layer.msg('保存成功');
      }else{
        layer.msg(result.msg);
      }
    }, 'json');
    return false;
  });
});

</script>
</body>
</html>
